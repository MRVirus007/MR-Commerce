<app-header></app-header>
<h2>Cart</h2>

<div *ngIf="cartItems$ | async as cartItems">
  <div *ngIf="cartItems.length === 0">
    Your cart is empty.
  </div>
  <!-- 
  <div *ngFor="let item of cartItems">
    <div>{{ item.name }} - {{ item.price }} - Quantity: {{ item.quantity }}</div>
    <button (click)="removeItem(item.id)">Remove</button>
    <input type="number" [(ngModel)]="item.quantity" (change)="updateItemQuantity(item)">
  </div>
</div> -->
  <!-- 
<div *ngIf="(totalPrice$ | async)?.totalPrice as totalPrice">
  Total Price: {{ totalPrice | currency }}
</div> -->

  <div class="cart-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems$ | async">
          <td>{{ item.name }}</td>
          <td>{{ item.price | currency }}</td>
          <td>
            <input type="number" [(ngModel)]="item.quantity" (change)="updateCartItem(item)">
          </td>
          <td>
            <button class="btn btn-danger" (click)="removeCartItem(item.id)">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>

    <p>Total Price: ${{totalPrice}}</p>
  </div>